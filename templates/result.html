<!DOCTYPE html>
<html>
<head>
<title>Dashboard</title>
<style>
body{margin:0;font-family:Segoe UI;background:#f4fff6}
header{
    background:linear-gradient(45deg,#1fa463,#28c07c);
    color:white;
    padding:18px;
    font-size:24px;
    text-align:center;
    position:sticky;
    top:0;
    z-index:99;
}

.cards{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(180px,1fr));
    gap:15px;
    padding:20px;
}

.card{
    background:white;
    padding:15px;
    border-radius:12px;
    box-shadow:0 5px 15px rgba(0,0,0,.1);
    border-left:6px solid #1fa463;
}
.card h4{margin:0;color:#555}
.card h2{margin:6px 0;color:#1fa463}

.box{padding:20px}

.search{
    width:300px;
    padding:10px;
    border-radius:20px;
    border:1px solid #ccc;
    margin-bottom:15px;
}

.table-wrap{
    max-height:650px;
    overflow:auto;
    border-radius:12px;
    box-shadow:0 5px 15px rgba(0,0,0,.1);
}

table{
    width:100%;
    border-collapse:collapse;
    background:white;
}
th,td{
    padding:10px;
    border:1px solid #ddd;
    text-align:center;
}
th{
    background:#1fa463;
    color:white;
    position:sticky;
    top:0;
}

tr:hover{background:#eafff1}

.btns{text-align:center;margin:20px}
button{
    background:linear-gradient(45deg,#1fa463,#28c07c);
    color:white;
    border:none;
    padding:10px 22px;
    border-radius:25px;
    margin:5px;
    cursor:pointer;
}

footer{text-align:center;padding:12px;color:#555}
</style>

<script>
function searchTable(){
    let v=document.getElementById("search").value.toLowerCase();
    document.querySelectorAll("tbody tr").forEach(r=>{
        r.style.display=r.innerText.toLowerCase().includes(v)?"":"none";
    });
}
</script>

</head>
<body>

<header>Agent Performance Live Dashboard</header>

<div class="cards">
<div class="card"><h4>Total IVR Hit</h4><h2>{{gt["TOTAL IVR HIT"]}}</h2></div>
<div class="card"><h4>Total Mature</h4><h2>{{gt["TOTAL MATURE"]}}</h2></div>
<div class="card"><h4>IB Mature</h4><h2>{{gt["IB MATURE"]}}</h2></div>
<div class="card"><h4>OB Mature</h4><h2>{{gt["OB MATURE"]}}</h2></div>
<div class="card"><h4>Total Talk Time</h4><h2>{{gt["TOTAL TALK TIME"]}}</h2></div>
<div class="card"><h4>AVG AHT</h4><h2>{{gt["AHT"]}}</h2></div>
<div class="card"><h4>Login Count</h4><h2>{{gt["LOGIN COUNT"]}}</h2></div>
</div>

<div class="box">

<input id="search" class="search" placeholder="Search Agent..." onkeyup="searchTable()">

<div class="table-wrap">
<table>
<thead>
<tr>
{% for k in data[0].keys() %}
<th>{{k}}</th>
{% endfor %}
</tr>
</thead>
<tbody>
{% for r in data %}
<tr>
{% for v in r.values() %}
<td>{{v}}</td>
{% endfor %}
</tr>
{% endfor %}
</tbody>
</table>
</div>

</div>

<div class="btns">
<button onclick="location.href='/export'">Export Excel</button>
<button onclick="location.href='/'">Reset</button>
</div>

<footer>Website created by Chandan Malakar</footer>

</body>
</html>
