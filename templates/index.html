<!DOCTYPE html>
<html>
<head>
<title>Agent Performance</title>
<style>
body{font-family:Arial;background:#f5fff5}
h2{color:#0b7d3b}
table{border-collapse:collapse;width:100%}
th,td{border:1px solid #0b7d3b;padding:6px;text-align:center}
th{background:#0b7d3b;color:white}
#loader{display:none;font-size:22px;color:green;text-align:center}
button{padding:8px 15px;background:#0b7d3b;color:white;border:none;border-radius:5px}
</style>
</head>
<body>

<h2>Agent Performance Report</h2>

<form id="form">
Agent Performance: <input type="file" name="agent" required><br><br>
CDR Report: <input type="file" name="cdr" required><br><br>
<button type="submit">Generate</button>
</form>

<div id="loader">‚è≥ Generating Report...</div>

<table id="table"></table>

<script>
document.getElementById("form").onsubmit = async function(e){
e.preventDefault();
document.getElementById("loader").style.display="block";

let fd=new FormData(this);

let res = await fetch("/process",{method:"POST",body:fd});
let data = await res.json();

let html="<tr><th>Agent ID</th><th>Full Name</th><th>Total Login</th><th>Net Login</th><th>Total Break</th><th>Total Meeting</th><th>Total Talk</th><th>AHT</th><th>Total Mature</th><th>IB Mature</th><th>OB Mature</th><th>Total IVR Hit</th></tr>";

for(let r of data){
html+="<tr>";
for(let c of r){ html+="<td>"+c+"</td>"; }
html+="</tr>";
}

document.getElementById("table").innerHTML=html;
document.getElementById("loader").style.display="none";
}
</script>

<p style="text-align:center;color:green">Website created by Chandan Malakar</p>

</body>
</html>
